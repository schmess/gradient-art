(()=>{var e={721:()=>{window.en={affirmations:["You have an amazing eye for color! ✨","Your creativity is truly inspiring! 🌟","These palettes showcase your artistic talent! 🎨","You're creating something beautiful! 💫","You're a natural at color harmony! 🌈","Your color choices are so thoughtful! ✨","That's a perfect combination! 🌟","Your design sense is exceptional! 💖","You make color selection look effortless! ✨","What a gorgeous palette you're creating! 🎨"],buttons:{showSolution:"Show Me How ✨",hideSolution:"Let Me Try Again",showHint:"Need a Hint? 💡",hintWithCountdown:"Hint ({seconds}s)",resetGame:"Start Fresh"},stats:{time:"Time",blunders:"Attempts",hints:"Inspirations"},messages:{welcome:"✨ Welcome! Drag colors from the pool on the left to your canvas on the right to create beautiful palettes!",duplicateColor:"This color is already in your palette! Try another shade instead 🎨",wrongRow:"This color belongs in another palette! Try a different row ✨",wrongPosition:"Good color choice! Try placing it somewhere else in this row 👍",sameRowOnly:"Let's keep colors in their palette families! Try moving within the same row 🌈",showingSolution:"✨ Here's how it should look! When you're ready, click 'Let Me Try Again'",continueArranging:"You're doing great! Keep arranging colors to create beautiful palettes 🎨",showingHint:"💫 Here's a hint! The highlighted colors might look better in a different spot",congratulations:"🎉 Amazing work! You created beautiful palettes in {minutes}m {seconds}s with {blunders} attempts and {hintsUsed} inspirations!"},howToPlay:{title:"Create Something Beautiful:",instructions:'Drag colors from the Color Pool to Your Canvas to create stunning palettes. Each row represents a different color relationship. The locked colors (🔒) are your guides - they\'re already in the perfect spot! Arrange the remaining colors to create harmonious combinations. Need help? Click "Need a Hint" or "Show Me How" for inspiration.'},paletteTypes:{monochromatic:{name:"Sunset Palette",description:"Like a sunset fading to night - light to dark variations of one color"},analogous:{name:"Harmony Blend",description:"Colors that sit next to each other - like spring flowers in a garden"},triadic:{name:"Vibrant Trio",description:"Three bold colors that create energy and excitement"},splitComplementary:{name:"Dynamic Balance",description:"A main color with two accent colors that make it pop"},complementary:{name:"Perfect Contrast",description:"Opposite colors that create dramatic, eye-catching combinations"}}}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{"use strict";n(721);const e=window.en;Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,o=arguments[1],s=0;s<n;s++){var a=t[s];if(e.call(o,a,s,t))return a}},configurable:!0,writable:!0}),document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".orientation-overlay"),n=document.querySelector(".game-container"),o=document.querySelectorAll(".matrix-container");function s(){window.innerWidth<=768&&window.matchMedia("(orientation: portrait)").matches?(t.style.display="flex",n.style.visibility="hidden"):(t.style.display="none",n.style.visibility="visible"),function(){const e=window.innerWidth,t=window.innerHeight,n=e<=768,s=window.matchMedia("(orientation: landscape)").matches;let a;n&&s?(a=.45*e,o.forEach((e=>{e.style.width=a+"px",e.style.height=a+"px",e.style.minWidth=a+"px",e.style.maxWidth=a+"px",e.style.minHeight=a+"px",e.style.maxHeight=a+"px"}))):(a=Math.min(.4*e,.7*t),o.forEach((e=>{e.style.width=a+"px",e.style.height=a+"px",e.style.minWidth=a+"px",e.style.maxWidth=a+"px",e.style.minHeight=a+"px",e.style.maxHeight=a+"px"})))}()}s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",s);const a={paletteTypes:["monochromatic","analogous","triadic","splitComplementary","complementary"],palettes:{monochromatic:["#e6f2ff","#bfd9ff","#99c2ff","#6699ff","#3366ff"],analogous:["#ff9999","#ffcc99","#ffff99","#ccff99","#99ffcc"],triadic:["#ff5555","#55ff55","#5555ff","#ff5555","#5555ff"],splitComplementary:["#ff6600","#ff9933","#33cc99","#66cc99","#cc33cc"],complementary:["#ff5555","#ff9999","#ffffff","#9999ff","#5555ff"]},lockedTiles:[[!1,!1,!0,!1,!1],[!1,!0,!1,!0,!1],[!0,!1,!0,!1,!0],[!1,!0,!1,!0,!1],[!1,!1,!0,!1,!1]]},i=document.getElementById("scrambled-matrix"),l=document.getElementById("solution-matrix"),r=document.getElementById("message"),c=document.getElementById("check-button"),d=document.getElementById("hint-button"),u=document.getElementById("reset-button");c.textContent=e.buttons.showSolution,d.textContent=e.buttons.showHint,u.textContent=e.buttons.resetGame,document.querySelector(".game-info h2").textContent=e.howToPlay.title,document.querySelector(".game-info p").textContent=e.howToPlay.instructions;const m=document.querySelectorAll(".palette-type h3, .palette-type p");for(let t=0;t<m.length;t+=2){const n=a.paletteTypes[Math.floor(t/2)],o=m[t],s=m[t+1];if(o){const s=Math.floor(t/2)+1;o.textContent=`Row ${s}: ${e.paletteTypes[n].name}`}s&&(s.textContent=e.paletteTypes[n].description)}document.querySelectorAll(".stat-label")[0].textContent=e.stats.time,document.querySelectorAll(".stat-label")[1].textContent=e.stats.blunders,document.querySelectorAll(".stat-label")[2].textContent=e.stats.hints;let h=null,p=[],f=0,y=0,g=null,x=null,v=null,w=!1,C=!1,T=null,b=0;const L=["#B159FF","#9C27B0","#673AB7","#FF59B6","#FF4081","#E91E63"];let E=0;function S(){G(),i.innerHTML="",l.innerHTML="",r.textContent=e.messages.welcome,r.className="message-area hint welcome",f=0,y=0,E=0,R(),j(),d.textContent=e.buttons.showHint,d.disabled=!1,v&&(clearInterval(v),v=null),T&&(clearTimeout(T),T=null),g=new Date,x&&clearInterval(x),x=setInterval(z,1e3),z(),w=!1,C=!1;const t=[];a.paletteTypes.forEach((e=>{t.push(...a.palettes[e])}));const n=[];for(let e=0;e<a.lockedTiles.length;e++){const t=a.paletteTypes[e],o=a.palettes[t];for(let t=0;t<a.lockedTiles[e].length;t++)a.lockedTiles[e][t]&&n.push(o[t])}const o={};for(const e of n)o[e]=(o[e]||0)+1;const s=[...t];for(const e in o){let t=o[e];for(let n=s.length-1;n>=0&&t>0;n--)s[n]===e&&(s.splice(n,1),t--)}[...s].sort((()=>Math.random()-.5)).forEach(((e,t)=>{const n=B(e,t,"scrambled");n.dataset.originalIndex=t,i.appendChild(n)}));for(let e=0;e<a.lockedTiles.length;e++){const t=a.lockedTiles[e],n=a.paletteTypes[e],o=a.palettes[n],s={};for(const e of o)s[e]=(s[e]||0)+1;for(let e=0;e<t.length;e++)if(t[e]){s[o[e]]--}for(let s=0;s<t.length;s++){const a=5*e+s;if(t[s]){const e=B(o[s],a,"locked");e.classList.add("locked"),l.appendChild(e)}else{const t=document.createElement("div");t.className="tile empty-slot",t.dataset.index=a,t.dataset.paletteType=n,t.dataset.rowIndex=e,t.dataset.colIndex=s,t.addEventListener("dragover",D),t.addEventListener("drop",W),l.appendChild(t)}}}O()}let k=null,M=0,N=0,q=null,I=null,A=!1;function B(e,t,n){const o=document.createElement("div");o.className="tile";const s=function(e,t){const n=parseInt(e.replace("#",""),16),o=Math.round(2.55*t),s=Math.min(255,(n>>16)+o),a=Math.min(255,(n>>8&255)+o),i=Math.min(255,(255&n)+o);return"#"+(16777216+(s<<16)+(a<<8)+i).toString(16).slice(1)}(e,15),a=function(e,t){const n=parseInt(e.replace("#",""),16),o=Math.round(2.55*t),s=Math.max(0,(n>>16)-o),a=Math.max(0,(n>>8&255)-o),i=Math.max(0,(255&n)-o);return"#"+(16777216+(s<<16)+(a<<8)+i).toString(16).slice(1)}(e,15);return o.style.background=`linear-gradient(135deg, ${s}, ${e} 50%, ${a})`,o.dataset.color=e,o.dataset.index=t,"locked"===n?o.classList.add("locked"):"scrambled"!==n&&"solution"!==n||(o.draggable=!0,o.addEventListener("dragstart",F),o.addEventListener("dragend",Y),o.addEventListener("touchstart",K,{passive:!1}),o.addEventListener("touchmove",V,{passive:!1}),o.addEventListener("touchend",J),o.addEventListener("touchcancel",Q)),o}function P(){if(!C){C=!0;document.querySelectorAll(".tile.locked").forEach((e=>{e.classList.add("hide-lock")}))}}function $(t=!1){if(E++,!t&&E<12)return;E=0,T&&clearTimeout(T);const n=Math.floor(Math.random()*e.affirmations.length),o=e.affirmations[n],s=Math.floor(Math.random()*L.length),a=L[s];r.textContent=o,r.className="message-area",r.style.color=a,T=setTimeout((()=>{(""===r.textContent||e.affirmations.includes(r.textContent))&&$(!0)}),5e3)}function H(){""!==r.textContent&&r.textContent!==e.messages.continueArranging||$(!0)}function F(e){h=this,this.style.opacity="0.4",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",this.dataset.color),h.dataset.sourceMatrix=this.closest("#scrambled-matrix")?"scrambled":"solution"}function Y(e){this.style.opacity="1",h=null}function D(e){return e.preventDefault&&e.preventDefault(),!!this.classList.contains("empty-slot")&&(e.dataTransfer.dropEffect="move",!1)}function W(t){if(t.preventDefault(),!h)return;const n=parseInt(this.dataset.index),o=Math.floor(n/5),s=a.paletteTypes[o],c=a.palettes[s],d=h.dataset.color,u=c.includes(d),m=(c.indexOf(d),this.dataset.paletteType,"solution"===h.dataset.sourceMatrix),p=[];for(let e=0;e<5;e++){const t=5*o+e,n=l.querySelector(`.tile[data-index="${t}"]:not(.empty-slot)`);n&&!n.classList.contains("empty-slot")&&p.push({color:n.dataset.color,index:t})}if(m){const t=parseInt(h.dataset.index);if(Math.floor(t/5)!==o){f++,R();const t=B(d,n,"solution");return t.classList.add("shake"),this.parentNode.replaceChild(t,this),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=n,e.addEventListener("dragover",D),e.addEventListener("drop",W),t.parentNode.replaceChild(e,t),h&&(h.style.opacity="1")}),500),r.textContent=e.messages.sameRowOnly,void(r.className="message-area error")}const s=document.createElement("div");s.className="tile empty-slot",s.dataset.index=h.dataset.index,s.addEventListener("dragover",D),s.addEventListener("drop",W),h.parentNode.replaceChild(s,h);const a=B(d,n,"solution");this.parentNode.replaceChild(a,this),ee(o)?(a.classList.add("correct-position"),$(),setTimeout((()=>{a.parentNode&&a.classList.remove("correct-position"),""===r.textContent&&H()}),500)):(f++,R(),a.classList.add("wrong-position"),r.textContent=e.messages.wrongPosition,r.className="message-area error",setTimeout((()=>{a.parentNode&&a.classList.remove("wrong-position")}),500))}else{if(!u){f++,R();const t=B(d,n,"solution");return t.classList.add("shake"),this.parentNode.replaceChild(t,this),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=n,e.addEventListener("dragover",D),e.addEventListener("drop",W),t.parentNode.replaceChild(e,t),h&&(h.style.opacity="1")}),500),r.textContent=e.messages.wrongRow,void(r.className="message-area error")}const t=B(d,n,"solution");if(this.parentNode.replaceChild(t,this),h.parentNode.removeChild(h),!ee(o))return f++,R(),t.classList.add("shake"),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=n,e.addEventListener("dragover",D),e.addEventListener("drop",W),t.parentNode&&t.parentNode.replaceChild(e,t);const o=B(d,i.children.length,"scrambled");i.appendChild(o)}),500),r.textContent=e.messages.wrongPosition,void(r.className="message-area error");t.classList.add("correct-position"),$(),setTimeout((()=>{t.parentNode&&t.classList.remove("correct-position"),""===r.textContent&&H()}),500)}O(),P(),w||function(){let e=!0;for(let t=0;t<a.paletteTypes.length;t++){const n=a.paletteTypes[t],o=a.palettes[n],s=[];for(let e=0;e<5;e++){const n=5*t+e,o=l.querySelector(`.tile[data-index="${n}"]`);o&&!o.classList.contains("empty-slot")&&s.push(o)}if(s.length<5){e=!1;continue}const i=s.map((e=>e.dataset.color)),r={},c={};for(const e of o)r[e]=(r[e]||0)+1;for(const e of i)c[e]=(c[e]||0)+1;const d=Object.keys(r),u=Object.keys(c);d.length===u.length?d.every((e=>u.includes(e)))&&d.every((e=>r[e]===c[e]))||(e=!1):e=!1}e&&U()}()}function O(){p=[];l.querySelectorAll(".tile:not(.empty-slot)").forEach((e=>{e.classList.contains("empty-slot")||p.push(e)}))}function X(){for(let e=0;e<a.lockedTiles.length;e++)for(let t=0;t<a.lockedTiles[e].length;t++){const n=5*e+t,o=l.querySelector(`.tile[data-index="${n}"]`);if((!a.lockedTiles[e][t]||!o)&&o){const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=n,e.addEventListener("dragover",D),e.addEventListener("drop",W),o.parentNode.replaceChild(e,o)}}}function R(){document.getElementById("blunder-value").textContent=f}function j(){document.getElementById("hints-value").textContent=y}function z(){if(!g)return;const e=new Date,t=Math.floor((e-g)/1e3),n=Math.floor(t/60).toString().padStart(2,"0"),o=(t%60).toString().padStart(2,"0");document.getElementById("timer-value").textContent=`${n}:${o}`}function U(){x&&clearInterval(x);const t=new Date,n=Math.floor((t-g)/1e3),o=Math.floor(n/60),s=n%60,a=function(e,t,n){const o=Math.max(0,500-Math.floor(e/10)),s=25*t,a=50*n;return{total:Math.max(0,1e3+o-s-a),baseScore:1e3,timeBonus:o,blunderPenalty:s,hintPenalty:a,timeInSeconds:e,blunders:t,hintsUsed:n}}(n,f,y);b=a.total;const i=e.messages.congratulations.replace("{minutes}",o).replace("{seconds}",s).replace("{blunders}",f).replace("{hintsUsed}",y);r.textContent=i,r.className="message-area success",p.forEach((e=>{e.classList.add("correct"),setTimeout((()=>{e.classList.remove("correct")}),1e3)})),setTimeout((()=>{!function(e){const t=document.getElementById("score-modal"),n=t.querySelector(".final-score"),o=t.querySelector(".base-score"),s=t.querySelector(".time-bonus"),a=t.querySelector(".blunder-penalty"),i=t.querySelector(".hint-penalty"),l=t.querySelector(".time-value"),r=t.querySelector(".blunders-value"),c=t.querySelector(".hints-value");n.textContent=e.total,o.textContent=e.baseScore,s.textContent=`+${e.timeBonus}`,a.textContent=`-${e.blunderPenalty}`,i.textContent=`-${e.hintPenalty}`;const d=Math.floor(e.timeInSeconds/60).toString().padStart(2,"0"),u=(e.timeInSeconds%60).toString().padStart(2,"0");l.textContent=`${d}:${u}`,r.textContent=e.blunders,c.textContent=e.hintsUsed,t.style.display="flex";const m=document.getElementById("play-again-button"),h=m.cloneNode(!0);m.parentNode.replaceChild(h,m),h.addEventListener("click",(()=>{G(),S()}))}(a)}),1500)}function G(){document.getElementById("score-modal").style.display="none"}function K(e){if(e.preventDefault(),this.classList.contains("locked"))return;k=this,k.dataset.sourceMatrix=this.closest("#scrambled-matrix")?"scrambled":"solution";const t=e.touches[0],n=k.getBoundingClientRect();var o,s;M=t.clientX-n.left,N=t.clientY-n.top,o=t.clientX,s=t.clientY,_(),I=k.cloneNode(!0),I.classList.add("ghost-tile"),I.style.position="fixed",I.style.zIndex="1000",I.style.opacity="0.8",I.style.pointerEvents="none",Z(o,s),requestAnimationFrame((()=>{document.body.appendChild(I)})),k.style.opacity="0.4",A=!0,P()}function V(e){if(!k)return;e.preventDefault(),A=!0;const t=e.touches[0];Z(t.clientX,t.clientY),window.touchMoveThrottle||(window.touchMoveThrottle=!0,requestAnimationFrame((()=>{let e=[];if(document.elementsFromPoint)e=document.elementsFromPoint(t.clientX,t.clientY);else if(document.elementFromPoint){const n=document.elementFromPoint(t.clientX,t.clientY);n&&(e=[n])}const n=e.find((e=>e.classList&&e.classList.contains("empty-slot")));q&&q!==n&&q.classList.remove("touch-hover"),n&&(n.classList.add("touch-hover"),q=n),window.touchMoveThrottle=!1})))}function J(e){if(k){if(_(),k.style.opacity="1",A){const t=e.changedTouches[0];let n=[];if(document.elementsFromPoint)n=document.elementsFromPoint(t.clientX,t.clientY);else if(document.elementFromPoint){const e=document.elementFromPoint(t.clientX,t.clientY);e&&(n=[e])}const o=n.find((e=>e.classList&&e.classList.contains("empty-slot")));o&&(o.classList.remove("touch-hover"),h=k,W.call(o,{preventDefault:()=>{}}))}k=null,q=null,A=!1}}function Q(){k&&(k.style.opacity="1"),_(),k=null,q=null,A=!1}function Z(e,t){if(!I)return;const n=e-M,o=t-N;requestAnimationFrame((()=>{I.style.transform=`translate3d(${n}px, ${o}px, 0)`}))}function _(){I&&I.parentNode&&(I.parentNode.removeChild(I),I=null),document.querySelectorAll(".empty-slot.touch-hover").forEach((e=>{e.classList.remove("touch-hover")}))}function ee(e){const t=a.paletteTypes[e],n=a.palettes[t],o={};for(const e of n)o[e]=(o[e]||0)+1;const s={};for(let t=0;t<5;t++){const n=5*e+t,o=l.querySelector(`.tile[data-index="${n}"]:not(.empty-slot)`);if(o){const e=o.dataset.color;s[e]=(s[e]||0)+1}}for(const e in s)if(!(e in o))return!1;for(const e in s)if(s[e]>o[e])return!1;return!0}c.addEventListener("click",(function(){w=!w,w?(!function(){(function(){window.savedState=[];for(let e=0;e<a.lockedTiles.length;e++)for(let t=0;t<a.lockedTiles[e].length;t++){const n=5*e+t,o=l.querySelector(`.tile[data-index="${n}"]`);if(o&&!o.classList.contains("empty-slot")){const s=a.lockedTiles[e][t];window.savedState.push({index:n,color:o.dataset.color,locked:s})}}})(),X();for(let e=0;e<a.lockedTiles.length;e++){const t=a.paletteTypes[e],n=a.palettes[t];for(let t=0;t<a.lockedTiles[e].length;t++){const o=5*e+t;if(a.lockedTiles[e][t])continue;const s=B(n[t],o,"solution");s.classList.add("solution-tile");const i=l.querySelector(`.tile[data-index="${o}"]`);i&&i.parentNode.replaceChild(s,i)}}r.textContent=e.messages.showingSolution,r.className="message-area hint"}(),c.textContent=e.buttons.hideSolution):(X(),window.savedState&&window.savedState.forEach((e=>{const t=e.index,n=Math.floor(t/5),o=t%5,s=a.lockedTiles[n][o];if(s)return;const i=l.querySelector(`.tile[data-index="${t}"]`);if(i&&!s){const n=B(e.color,t,"solution");i.parentNode.replaceChild(n,i)}})),r.textContent=e.messages.continueArranging,r.className="message-area",setTimeout((()=>{H()}),3e3),c.textContent=e.buttons.showSolution)})),d.addEventListener("click",(function(){y++,j(),d.disabled=!0;for(let e=0;e<a.paletteTypes.length;e++){const t=a.paletteTypes[e],n=a.palettes[t];for(let t=0;t<5;t++){if(a.lockedTiles[e][t])continue;const o=5*e+t,s=l.querySelector(`.tile[data-index="${o}"]:not(.empty-slot)`);if(s&&!s.classList.contains("empty-slot")){const e=s.dataset.color;if(n.includes(e)){n.indexOf(e)!==t&&s.classList.add("wrong-position")}}}}r.textContent=e.messages.showingHint,r.className="message-area hint";let t=10;d.textContent=e.buttons.hintWithCountdown.replace("{seconds}",t),v&&clearInterval(v),v=setInterval((()=>{if(t--,d.textContent=e.buttons.hintWithCountdown.replace("{seconds}",t),t<=0){clearInterval(v);l.querySelectorAll(".tile").forEach((e=>{e.classList.remove("wrong-position")})),d.textContent=e.buttons.showHint,d.disabled=!1,r.textContent="",r.className="message-area"}}),1e3)})),u.addEventListener("click",S);const te=document.getElementById("finish-button");te&&te.addEventListener("click",(function(){U()})),S(),window.showSuccess=U}))})()})();