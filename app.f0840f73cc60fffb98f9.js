(()=>{var e={721:()=>{window.en={affirmations:["You have an amazing eye for color! ✨","Your creativity is truly inspiring! 🌟","These palettes showcase your artistic talent! 🎨","You're creating something beautiful! 💫","You're a natural at color harmony! 🌈","Your color choices are so thoughtful! ✨","That's a perfect combination! 🌟","Your design sense is exceptional! 💖","You make color selection look effortless! ✨","What a gorgeous palette you're creating! 🎨"],buttons:{showSolution:"Show Me How ✨",hideSolution:"Let Me Try Again",showHint:"Need a Hint? 💡",hintWithCountdown:"Hint ({seconds}s)",resetGame:"Start Fresh"},messages:{welcome:"✨ Welcome! Drag colors from the pool on the left to your canvas on the right to create beautiful palettes!",duplicateColor:"This color is already in your palette! Try another shade instead 🎨",wrongRow:"This color belongs in another palette! Try a different row ✨",wrongPosition:"Good color choice! Try placing it somewhere else in this row 👍",sameRowOnly:"Let's keep colors in their palette families! Try moving within the same row 🌈",showingSolution:"✨ Here's how it should look! When you're ready, click 'Let Me Try Again'",continueArranging:"You're doing great! Keep arranging colors to create beautiful palettes 🎨",showingHint:"💫 Here's a hint! The highlighted colors might look better in a different spot",congratulations:"🎉 Amazing work! You created beautiful palettes in {minutes}m {seconds}s with {blunders} attempts and {hintsUsed} inspirations!"},howToPlay:{title:"Create Something Beautiful:",instructions:'Drag colors from the Color Pool to Your Canvas to create stunning palettes. Each row represents a different color relationship. The locked colors (🔒) are your guides - they\'re already in the perfect spot! Arrange the remaining colors to create harmonious combinations. Need help? Click "Need a Hint" or "Show Me How" for inspiration.'},paletteTypes:{monochromatic:{name:"Sunset Palette",description:"Like a sunset fading to night - light to dark variations of one color"},analogous:{name:"Harmony Blend",description:"Colors that sit next to each other - like spring flowers in a garden"},triadic:{name:"Vibrant Trio",description:"Three bold colors that create energy and excitement"},splitComplementary:{name:"Dynamic Balance",description:"A main color with two accent colors that make it pop"},complementary:{name:"Perfect Contrast",description:"Opposite colors that create dramatic, eye-catching combinations"}}}}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}(()=>{"use strict";o(721);const e=window.en;Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),o=t.length>>>0,n=arguments[1],s=0;s<o;s++){var a=t[s];if(e.call(n,a,s,t))return a}},configurable:!0,writable:!0}),document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".orientation-overlay"),o=document.querySelector(".game-container");function n(){window.innerWidth<=768&&window.matchMedia("(orientation: portrait)").matches?(t.style.display="flex",o.style.visibility="hidden"):(t.style.display="none",o.style.visibility="visible")}n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n);const s={paletteTypes:["monochromatic","analogous","triadic","splitComplementary","complementary"],palettes:{monochromatic:["#e6f2ff","#bfd9ff","#99c2ff","#6699ff","#3366ff"],analogous:["#ff9999","#ffcc99","#ffff99","#ccff99","#99ffcc"],triadic:["#ff5555","#55ff55","#5555ff","#ff5555","#5555ff"],splitComplementary:["#ff6600","#ff9933","#33cc99","#66cc99","#cc33cc"],complementary:["#ff5555","#ff9999","#ffffff","#9999ff","#5555ff"]},lockedTiles:[[!1,!1,!0,!1,!1],[!1,!0,!1,!0,!1],[!0,!0,!0,!0,!0],[!1,!0,!1,!0,!1],[!1,!1,!0,!1,!1]]},a=document.getElementById("scrambled-matrix"),i=document.getElementById("solution-matrix"),l=document.getElementById("message"),r=document.getElementById("check-button"),c=document.getElementById("hint-button"),d=document.getElementById("reset-button");r.textContent=e.buttons.showSolution,c.textContent=e.buttons.showHint,d.textContent=e.buttons.resetGame,document.querySelector(".game-info h2").textContent=e.howToPlay.title,document.querySelector(".game-info p").textContent=e.howToPlay.instructions;const u=document.querySelectorAll(".palette-type h3, .palette-type p");for(let t=0;t<u.length;t+=2){const o=s.paletteTypes[Math.floor(t/2)],n=u[t],a=u[t+1];if(n){const s=Math.floor(t/2)+1;n.textContent=`Row ${s}: ${e.paletteTypes[o].name}`}a&&(a.textContent=e.paletteTypes[o].description)}let m=null,f=[],h=0,p=0,y=null,g=null,v=null,x=!1,w=!1,C=null,T=0;const L=["#B159FF","#9C27B0","#673AB7","#FF59B6","#FF4081","#E91E63"];let b=0;function E(){U(),a.innerHTML="",i.innerHTML="",l.textContent=e.messages.welcome,l.className="message-area hint welcome",h=0,p=0,b=0,X(),R(),c.textContent=e.buttons.showHint,c.disabled=!1,v&&(clearInterval(v),v=null),C&&(clearTimeout(C),C=null),y=new Date,g&&clearInterval(g),g=setInterval(j,1e3),j(),x=!1,w=!1;const t=[];s.paletteTypes.forEach((e=>{t.push(...s.palettes[e])}));const o=[];for(let e=0;e<s.lockedTiles.length;e++){const t=s.paletteTypes[e],n=s.palettes[t];for(let t=0;t<s.lockedTiles[e].length;t++)s.lockedTiles[e][t]&&o.push(n[t])}const n={};for(const e of o)n[e]=(n[e]||0)+1;const r=[...t];for(const e in n){let t=n[e];for(let o=r.length-1;o>=0&&t>0;o--)r[o]===e&&(r.splice(o,1),t--)}[...r].sort((()=>Math.random()-.5)).forEach(((e,t)=>{const o=B(e,t,"scrambled");o.dataset.originalIndex=t,a.appendChild(o)}));for(let e=0;e<s.lockedTiles.length;e++){const t=s.lockedTiles[e],o=s.paletteTypes[e],n=s.palettes[o],a={};for(const e of n)a[e]=(a[e]||0)+1;for(let e=0;e<t.length;e++)if(t[e]){a[n[e]]--}for(let s=0;s<t.length;s++){const a=5*e+s;if(t[s]){const e=B(n[s],a,"locked");e.classList.add("locked"),i.appendChild(e)}else{const t=document.createElement("div");t.className="tile empty-slot",t.dataset.index=a,t.dataset.paletteType=o,t.dataset.rowIndex=e,t.dataset.colIndex=s,t.addEventListener("dragover",H),t.addEventListener("drop",D),i.appendChild(t)}}}O()}let S=null,k=0,N=0,M=null,I=null,q=!1;function B(e,t,o){const n=document.createElement("div");n.className="tile";const s=function(e,t){const o=parseInt(e.replace("#",""),16),n=Math.round(2.55*t),s=Math.min(255,(o>>16)+n),a=Math.min(255,(o>>8&255)+n),i=Math.min(255,(255&o)+n);return"#"+(16777216+(s<<16)+(a<<8)+i).toString(16).slice(1)}(e,15),a=function(e,t){const o=parseInt(e.replace("#",""),16),n=Math.round(2.55*t),s=Math.max(0,(o>>16)-n),a=Math.max(0,(o>>8&255)-n),i=Math.max(0,(255&o)-n);return"#"+(16777216+(s<<16)+(a<<8)+i).toString(16).slice(1)}(e,15);return n.style.background=`linear-gradient(135deg, ${s}, ${e} 50%, ${a})`,n.dataset.color=e,n.dataset.index=t,"locked"===o?n.classList.add("locked"):"scrambled"!==o&&"solution"!==o||(n.draggable=!0,n.addEventListener("dragstart",F),n.addEventListener("dragend",Y),n.addEventListener("touchstart",G,{passive:!1}),n.addEventListener("touchmove",K,{passive:!1}),n.addEventListener("touchend",V),n.addEventListener("touchcancel",J)),n}function P(){if(!w){w=!0;document.querySelectorAll(".tile.locked").forEach((e=>{e.classList.add("hide-lock")}))}}function $(t=!1){if(b++,!t&&b<12)return;b=0,C&&clearTimeout(C);const o=Math.floor(Math.random()*e.affirmations.length),n=e.affirmations[o],s=Math.floor(Math.random()*L.length),a=L[s];l.textContent=n,l.className="message-area",l.style.color=a,C=setTimeout((()=>{(""===l.textContent||e.affirmations.includes(l.textContent))&&$(!0)}),5e3)}function A(){""!==l.textContent&&l.textContent!==e.messages.continueArranging||$(!0)}function F(e){m=this,this.style.opacity="0.4",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",this.dataset.color),m.dataset.sourceMatrix=this.closest("#scrambled-matrix")?"scrambled":"solution"}function Y(e){this.style.opacity="1",m=null}function H(e){return e.preventDefault&&e.preventDefault(),!!this.classList.contains("empty-slot")&&(e.dataTransfer.dropEffect="move",!1)}function D(t){if(t.preventDefault(),!m)return;const o=parseInt(this.dataset.index),n=Math.floor(o/5),r=s.paletteTypes[n],c=s.palettes[r],d=m.dataset.color,u=c.includes(d),f=(c.indexOf(d),this.dataset.paletteType,"solution"===m.dataset.sourceMatrix),p=[];for(let e=0;e<5;e++){const t=5*n+e,o=i.querySelector(`.tile[data-index="${t}"]:not(.empty-slot)`);o&&!o.classList.contains("empty-slot")&&p.push({color:o.dataset.color,index:t})}if(f){const t=parseInt(m.dataset.index);if(Math.floor(t/5)!==n){h++,X();const t=B(d,o,"solution");return t.classList.add("shake"),this.parentNode.replaceChild(t,this),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",H),e.addEventListener("drop",D),t.parentNode.replaceChild(e,t),m&&(m.style.opacity="1")}),500),l.textContent=e.messages.sameRowOnly,void(l.className="message-area error")}const s=document.createElement("div");s.className="tile empty-slot",s.dataset.index=m.dataset.index,s.addEventListener("dragover",H),s.addEventListener("drop",D),m.parentNode.replaceChild(s,m);const a=B(d,o,"solution");this.parentNode.replaceChild(a,this),_(n)?(a.classList.add("correct-position"),$(),setTimeout((()=>{a.parentNode&&a.classList.remove("correct-position"),""===l.textContent&&A()}),500)):(h++,X(),a.classList.add("wrong-position"),l.textContent=e.messages.wrongPosition,l.className="message-area error",setTimeout((()=>{a.parentNode&&a.classList.remove("wrong-position")}),500))}else{if(!u){h++,X();const t=B(d,o,"solution");return t.classList.add("shake"),this.parentNode.replaceChild(t,this),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",H),e.addEventListener("drop",D),t.parentNode.replaceChild(e,t),m&&(m.style.opacity="1")}),500),l.textContent=e.messages.wrongRow,void(l.className="message-area error")}const t=B(d,o,"solution");if(this.parentNode.replaceChild(t,this),m.parentNode.removeChild(m),!_(n))return h++,X(),t.classList.add("shake"),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",H),e.addEventListener("drop",D),t.parentNode&&t.parentNode.replaceChild(e,t);const n=B(d,a.children.length,"scrambled");a.appendChild(n)}),500),l.textContent=e.messages.wrongPosition,void(l.className="message-area error");t.classList.add("correct-position"),$(),setTimeout((()=>{t.parentNode&&t.classList.remove("correct-position"),""===l.textContent&&A()}),500)}O(),P(),x||function(){let e=!0;for(let t=0;t<s.paletteTypes.length;t++){const o=s.paletteTypes[t],n=s.palettes[o],a=[];for(let e=0;e<5;e++){const o=5*t+e,n=i.querySelector(`.tile[data-index="${o}"]`);n&&!n.classList.contains("empty-slot")&&a.push(n)}if(a.length<5){e=!1;continue}const l=a.map((e=>e.dataset.color)),r={},c={};for(const e of n)r[e]=(r[e]||0)+1;for(const e of l)c[e]=(c[e]||0)+1;const d=Object.keys(r),u=Object.keys(c);d.length===u.length?d.every((e=>u.includes(e)))&&d.every((e=>r[e]===c[e]))||(e=!1):e=!1}e&&z()}()}function O(){f=[];i.querySelectorAll(".tile:not(.empty-slot)").forEach((e=>{e.classList.contains("empty-slot")||f.push(e)}))}function W(){for(let e=0;e<s.lockedTiles.length;e++)for(let t=0;t<s.lockedTiles[e].length;t++){const o=5*e+t,n=i.querySelector(`.tile[data-index="${o}"]`);if((!s.lockedTiles[e][t]||!n)&&n){const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",H),e.addEventListener("drop",D),n.parentNode.replaceChild(e,n)}}}function X(){document.getElementById("blunder-value").textContent=h}function R(){document.getElementById("hints-value").textContent=p}function j(){if(!y)return;const e=new Date,t=Math.floor((e-y)/1e3),o=Math.floor(t/60).toString().padStart(2,"0"),n=(t%60).toString().padStart(2,"0");document.getElementById("timer-value").textContent=`${o}:${n}`}function z(){g&&clearInterval(g);const t=new Date,o=Math.floor((t-y)/1e3),n=Math.floor(o/60),s=o%60,a=function(e,t,o){const n=Math.max(0,500-Math.floor(e/10)),s=25*t,a=50*o;return{total:Math.max(0,1e3+n-s-a),baseScore:1e3,timeBonus:n,blunderPenalty:s,hintPenalty:a,timeInSeconds:e,blunders:t,hintsUsed:o}}(o,h,p);T=a.total;const i=e.messages.congratulations.replace("{minutes}",n).replace("{seconds}",s).replace("{blunders}",h).replace("{hintsUsed}",p);l.textContent=i,l.className="message-area success",f.forEach((e=>{e.classList.add("correct"),setTimeout((()=>{e.classList.remove("correct")}),1e3)})),setTimeout((()=>{!function(e){const t=document.getElementById("score-modal"),o=t.querySelector(".final-score"),n=t.querySelector(".base-score"),s=t.querySelector(".time-bonus"),a=t.querySelector(".blunder-penalty"),i=t.querySelector(".hint-penalty"),l=t.querySelector(".time-value"),r=t.querySelector(".blunders-value"),c=t.querySelector(".hints-value");o.textContent=e.total,n.textContent=e.baseScore,s.textContent=`+${e.timeBonus}`,a.textContent=`-${e.blunderPenalty}`,i.textContent=`-${e.hintPenalty}`;const d=Math.floor(e.timeInSeconds/60).toString().padStart(2,"0"),u=(e.timeInSeconds%60).toString().padStart(2,"0");l.textContent=`${d}:${u}`,r.textContent=e.blunders,c.textContent=e.hintsUsed,t.style.display="flex";const m=document.getElementById("play-again-button"),f=m.cloneNode(!0);m.parentNode.replaceChild(f,m),f.addEventListener("click",(()=>{U(),E()}))}(a)}),1500)}function U(){document.getElementById("score-modal").style.display="none"}function G(e){if(e.preventDefault(),this.classList.contains("locked"))return;S=this,S.dataset.sourceMatrix=this.closest("#scrambled-matrix")?"scrambled":"solution";const t=e.touches[0],o=S.getBoundingClientRect();var n,s;k=t.clientX-o.left,N=t.clientY-o.top,n=t.clientX,s=t.clientY,Z(),I=S.cloneNode(!0),I.classList.add("ghost-tile"),I.style.position="fixed",I.style.zIndex="1000",I.style.opacity="0.8",I.style.pointerEvents="none",Q(n,s),requestAnimationFrame((()=>{document.body.appendChild(I)})),S.style.opacity="0.4",q=!0,P()}function K(e){if(!S)return;e.preventDefault(),q=!0;const t=e.touches[0];Q(t.clientX,t.clientY),window.touchMoveThrottle||(window.touchMoveThrottle=!0,requestAnimationFrame((()=>{let e=[];if(document.elementsFromPoint)e=document.elementsFromPoint(t.clientX,t.clientY);else if(document.elementFromPoint){const o=document.elementFromPoint(t.clientX,t.clientY);o&&(e=[o])}const o=e.find((e=>e.classList&&e.classList.contains("empty-slot")));M&&M!==o&&M.classList.remove("touch-hover"),o&&(o.classList.add("touch-hover"),M=o),window.touchMoveThrottle=!1})))}function V(e){if(S){if(Z(),S.style.opacity="1",q){const t=e.changedTouches[0];let o=[];if(document.elementsFromPoint)o=document.elementsFromPoint(t.clientX,t.clientY);else if(document.elementFromPoint){const e=document.elementFromPoint(t.clientX,t.clientY);e&&(o=[e])}const n=o.find((e=>e.classList&&e.classList.contains("empty-slot")));n&&(n.classList.remove("touch-hover"),m=S,D.call(n,{preventDefault:()=>{}}))}S=null,M=null,q=!1}}function J(){S&&(S.style.opacity="1"),Z(),S=null,M=null,q=!1}function Q(e,t){if(!I)return;const o=e-k,n=t-N;requestAnimationFrame((()=>{I.style.transform=`translate3d(${o}px, ${n}px, 0)`}))}function Z(){I&&I.parentNode&&(I.parentNode.removeChild(I),I=null),document.querySelectorAll(".empty-slot.touch-hover").forEach((e=>{e.classList.remove("touch-hover")}))}function _(e){const t=s.paletteTypes[e],o=s.palettes[t],n={};for(const e of o)n[e]=(n[e]||0)+1;const a={};for(let t=0;t<5;t++){const o=5*e+t,n=i.querySelector(`.tile[data-index="${o}"]:not(.empty-slot)`);if(n){const e=n.dataset.color;a[e]=(a[e]||0)+1}}for(const e in a)if(!(e in n))return!1;for(const e in a)if(a[e]>n[e])return!1;return!0}r.addEventListener("click",(function(){x=!x,x?(!function(){(function(){window.savedState=[];for(let e=0;e<s.lockedTiles.length;e++)for(let t=0;t<s.lockedTiles[e].length;t++){const o=5*e+t,n=i.querySelector(`.tile[data-index="${o}"]`);if(n&&!n.classList.contains("empty-slot")){const a=s.lockedTiles[e][t];window.savedState.push({index:o,color:n.dataset.color,locked:a})}}})(),W();for(let e=0;e<s.lockedTiles.length;e++){const t=s.paletteTypes[e],o=s.palettes[t];for(let t=0;t<s.lockedTiles[e].length;t++){const n=5*e+t;if(s.lockedTiles[e][t])continue;const a=B(o[t],n,"solution");a.classList.add("solution-tile");const l=i.querySelector(`.tile[data-index="${n}"]`);l&&l.parentNode.replaceChild(a,l)}}l.textContent=e.messages.showingSolution,l.className="message-area hint"}(),r.textContent=e.buttons.hideSolution):(W(),window.savedState&&window.savedState.forEach((e=>{const t=e.index,o=Math.floor(t/5),n=t%5,a=s.lockedTiles[o][n];if(a)return;const l=i.querySelector(`.tile[data-index="${t}"]`);if(l&&!a){const o=B(e.color,t,"solution");l.parentNode.replaceChild(o,l)}})),l.textContent=e.messages.continueArranging,l.className="message-area",setTimeout((()=>{A()}),3e3),r.textContent=e.buttons.showSolution)})),c.addEventListener("click",(function(){p++,R(),c.disabled=!0;for(let e=0;e<s.paletteTypes.length;e++){const t=s.paletteTypes[e],o=s.palettes[t];for(let t=0;t<5;t++){if(s.lockedTiles[e][t])continue;const n=5*e+t,a=i.querySelector(`.tile[data-index="${n}"]:not(.empty-slot)`);if(a&&!a.classList.contains("empty-slot")){const e=a.dataset.color;if(o.includes(e)){o.indexOf(e)!==t&&a.classList.add("wrong-position")}}}}l.textContent=e.messages.showingHint,l.className="message-area hint";let t=10;c.textContent=e.buttons.hintWithCountdown.replace("{seconds}",t),v&&clearInterval(v),v=setInterval((()=>{if(t--,c.textContent=e.buttons.hintWithCountdown.replace("{seconds}",t),t<=0){clearInterval(v);i.querySelectorAll(".tile").forEach((e=>{e.classList.remove("wrong-position")})),c.textContent=e.buttons.showHint,c.disabled=!1,l.textContent="",l.className="message-area"}}),1e3)})),d.addEventListener("click",E);const ee=document.getElementById("finish-button");ee&&ee.addEventListener("click",(function(){z()})),E(),window.showSuccess=z}))})()})();