(()=>{var e={721:()=>{window.en={affirmations:["You have an amazing eye for color! ✨","Your creativity is truly inspiring! 🌟","These palettes showcase your artistic talent! 🎨","You're creating something beautiful! 💫","You're a natural at color harmony! 🌈","Your color choices are so thoughtful! ✨","That's a perfect combination! 🌟","Your design sense is exceptional! 💖","You make color selection look effortless! ✨","What a gorgeous palette you're creating! 🎨"],buttons:{showSolution:"Show Me How ✨",hideSolution:"Let Me Try Again",showHint:"Need a Hint? 💡",hintWithCountdown:"Hint ({seconds}s)",resetGame:"Start Fresh"},messages:{welcome:"✨ Welcome! Drag colors from the pool on the left to your canvas on the right to create beautiful palettes. Complete all rows to win!",duplicateColor:"This color is already in your palette! Try another shade instead 🎨",wrongRow:"This color belongs in another palette! Try a different row ✨",wrongPosition:"Good color choice! Try placing it somewhere else in this row 👍",sameRowOnly:"Let's keep colors in their palette families! Try moving within the same row 🌈",showingSolution:"✨ Here's how it should look! When you're ready, click 'Let Me Try Again'",continueArranging:"You're doing great! Keep arranging colors to create beautiful palettes 🎨",showingHint:"💫 Here's a hint! The highlighted colors might look better in a different spot",congratulations:"🎉 Amazing work! You created beautiful palettes in {minutes}m {seconds}s with {blunders} attempts and {hintsUsed} inspirations!",noMisplacedTiles:"✨ All tiles in this row are perfectly placed! No hints needed right now."},howToPlay:{title:"Create Something Beautiful:",instructions:'Drag colors from the Color Pool to Your Canvas to create stunning palettes. Each row represents a different color relationship. The locked colors (🔒) are your guides - they\'re already in the perfect spot! Arrange the remaining colors to create harmonious combinations. Need help? Click "Need a Hint" or "Show Me How" for inspiration.'},paletteTypes:{monochromatic:{name:"Sunset Palette",description:"Like a sunset fading to night - light to dark variations of one color"},analogous:{name:"Harmony Blend",description:"Colors that sit next to each other - like spring flowers in a garden"},triadic:{name:"Vibrant Trio",description:"Three bold colors that create energy and excitement"},splitComplementary:{name:"Dynamic Balance",description:"A main color with two accent colors that make it pop"},complementary:{name:"Perfect Contrast",description:"Opposite colors that create dramatic, eye-catching combinations"}}}}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}(()=>{"use strict";o(721);const e=window.en;Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),o=t.length>>>0,n=arguments[1],s=0;s<o;s++){var a=t[s];if(e.call(n,a,s,t))return a}},configurable:!0,writable:!0}),document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("welcome-screen"),o=document.getElementById("ready-button"),n=document.querySelector(".game-container"),s=document.querySelector(".game-stats"),a=document.querySelector(".controls"),i=document.querySelector(".game-info"),l=document.getElementById("message"),r=document.querySelector(".orientation-overlay"),c=document.getElementById("score-modal"),d=document.getElementById("info-modal"),u=document.getElementById("close-info-modal"),m=document.getElementById("info-button");function p(){window.innerWidth<=768&&window.matchMedia("(orientation: portrait)").matches?(r.style.display="flex",n.style.visibility="hidden"):(r.style.display="none",n.style.visibility="visible")}n.style.display="none",s.style.display="none",a.style.display="none",i.style.display="none",l.style.display="none",c&&(c.style.display="none"),r&&(r.style.display="none"),d.style.display="none",m.style.display="none",o.addEventListener("click",(function(){t.style.display="none",n.style.display="",s.style.display="",a.style.display="",i.style.display="",l.style.display="",d.style.display="flex",m.style.display="flex",p(),$()})),m.addEventListener("click",(function(){d.style.display="flex"})),u.addEventListener("click",(function(){d.style.display="none"})),d.addEventListener("click",(function(e){e.target===d&&(d.style.display="none")})),p(),window.addEventListener("resize",p),window.addEventListener("orientationchange",p);const f={paletteTypes:["monochromatic","analogous","triadic","splitComplementary","complementary"],palettes:{monochromatic:["#e6f2ff","#bfd9ff","#99c2ff","#6699ff","#3366ff"],analogous:["#ff9999","#ffcc99","#ffff99","#ccff99","#99ffcc"],triadic:["#ff5555","#55ff55","#5555ff","#ff5555","#5555ff"],splitComplementary:["#ff6600","#ff9933","#33cc99","#66cc99","#cc33cc"],complementary:["#ff5555","#ff9999","#ffffff","#9999ff","#5555ff"]},lockedTiles:[[!1,!1,!0,!1,!1],[!1,!0,!1,!0,!1],[!0,!0,!0,!0,!0],[!1,!0,!1,!0,!1],[!1,!1,!0,!1,!1]]},h=document.getElementById("scrambled-matrix"),y=document.getElementById("solution-matrix"),g=document.getElementById("check-button"),v=document.getElementById("hint-button"),w=document.getElementById("reset-button");g.textContent=e.buttons.showSolution,v.textContent=e.buttons.showHint,w.textContent=e.buttons.resetGame,document.querySelector(".game-info h2").textContent=e.howToPlay.title,document.querySelector(".game-info p").textContent=e.howToPlay.instructions;const x=document.querySelectorAll(".palette-type h3, .palette-type p");for(let t=0;t<x.length;t+=2){const o=f.paletteTypes[Math.floor(t/2)],n=x[t],s=x[t+1];if(n){const s=Math.floor(t/2)+1;n.textContent=`Row ${s}: ${e.paletteTypes[o].name}`}s&&(s.textContent=e.paletteTypes[o].description)}let L=null,T=[],C=0,E=0,k=null,b=null,S=null,N=!1,M=!1,I=null,B=0;const q=["#B159FF","#9C27B0","#673AB7","#FF59B6","#FF4081","#E91E63"];let A=0;const P=12;function $(){h.innerHTML="",y.innerHTML="",l.textContent=e.messages.welcome,l.className="message-area hint welcome",C=0,E=0,A=0,ee(),te(),v.textContent=e.buttons.showHint,v.disabled=!1,S&&(clearInterval(S),S=null),I&&(clearTimeout(I),I=null),k=new Date,b&&clearInterval(b),b=setInterval(oe,1e3),oe(),N=!1,M=!1;const t=[];f.paletteTypes.forEach((e=>{t.push(...f.palettes[e])}));const o=[];for(let e=0;e<f.lockedTiles.length;e++){const t=f.paletteTypes[e],n=f.palettes[t];for(let t=0;t<f.lockedTiles[e].length;t++)f.lockedTiles[e][t]&&o.push(n[t])}const n={};for(const e of o)n[e]=(n[e]||0)+1;const s=[...t];for(const e in n){let t=n[e];for(let o=s.length-1;o>=0&&t>0;o--)s[o]===e&&(s.splice(o,1),t--)}[...s].sort((()=>Math.random()-.5)).forEach(((e,t)=>{const o=W(e,t,"scrambled");o.dataset.originalIndex=t,h.appendChild(o)}));for(let e=0;e<f.lockedTiles.length;e++){const t=f.lockedTiles[e],o=f.paletteTypes[e],n=f.palettes[o],s={};for(const e of n)s[e]=(s[e]||0)+1;for(let e=0;e<t.length;e++)if(t[e]){s[n[e]]--}for(let s=0;s<t.length;s++){const a=5*e+s;if(t[s]){const e=W(n[s],a,"locked");e.classList.add("locked"),y.appendChild(e)}else{const t=document.createElement("div");t.className="tile empty-slot",t.dataset.index=a,t.dataset.paletteType=o,t.dataset.rowIndex=e,t.dataset.colIndex=s,t.addEventListener("dragover",J),t.addEventListener("drop",Q),y.appendChild(t)}}}Z(),g.style.display="",v.style.display="",w.style.display="";const a=document.getElementById("play-again-bottom");a&&(a.style.display="none")}let F=null,Y=0,H=0,D=null,O=null,R=!1;function W(e,t,o){const n=document.createElement("div");n.className="tile";const s=K(e,15),a=U(e,15);return n.style.background=`linear-gradient(135deg, ${s}, ${e} 50%, ${a})`,n.dataset.color=e,n.dataset.index=t,"locked"===o?n.classList.add("locked"):"scrambled"!==o&&"solution"!==o||(n.draggable=!0,n.addEventListener("dragstart",j),n.addEventListener("dragend",V),n.addEventListener("dragover",J),n.addEventListener("drop",Q),n.addEventListener("touchstart",ae,{passive:!1}),n.addEventListener("touchmove",ie,{passive:!1}),n.addEventListener("touchend",le),n.addEventListener("touchcancel",re)),n}function X(){if(!M){M=!0;document.querySelectorAll(".tile.locked").forEach((e=>{e.classList.add("hide-lock")}))}}function z(t=!1){if(A++,!t&&A<P)return;A=0,I&&clearTimeout(I);const o=Math.floor(Math.random()*e.affirmations.length),n=e.affirmations[o],s=Math.floor(Math.random()*q.length),a=q[s];l.textContent=n,l.className="message-area",l.style.color=a,I=setTimeout((()=>{(""===l.textContent||e.affirmations.includes(l.textContent))&&z(!0)}),5e3)}function G(){""!==l.textContent&&l.textContent!==e.messages.continueArranging||z(!0)}function K(e,t){const o=parseInt(e.replace("#",""),16),n=Math.round(2.55*t);return"#"+(16777216+(Math.min(255,(o>>16)+n)<<16)+(Math.min(255,(o>>8&255)+n)<<8)+Math.min(255,(255&o)+n)).toString(16).slice(1)}function U(e,t){const o=parseInt(e.replace("#",""),16),n=Math.round(2.55*t);return"#"+(16777216+(Math.max(0,(o>>16)-n)<<16)+(Math.max(0,(o>>8&255)-n)<<8)+Math.max(0,(255&o)-n)).toString(16).slice(1)}function j(e){L=this,this.style.opacity="0.4",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",this.dataset.color),L.dataset.sourceMatrix=this.closest("#scrambled-matrix")?"scrambled":"solution"}function V(e){this.style.opacity="1",L=null}function J(e){return e.preventDefault&&e.preventDefault(),!!(this.classList.contains("empty-slot")||this.classList.contains("tile")&&!this.classList.contains("locked"))&&(e.dataTransfer.dropEffect="move",!1)}function Q(t){if(t.preventDefault(),!L)return;const o=parseInt(this.dataset.index),n=Math.floor(o/5),s=f.paletteTypes[n],a=f.palettes[s],i=L.dataset.color,r="solution"===L.dataset.sourceMatrix;if(!this.classList.contains("empty-slot")&&this.classList.contains("tile")&&!this.classList.contains("locked")){const t=parseInt(L.dataset.index),o=Math.floor(t/5);if(o!==n)return C++,ee(),this.classList.add("shake"),setTimeout((()=>{this.classList.remove("shake"),L&&(L.style.opacity="1")}),500),l.textContent=e.messages.sameRowOnly,void(l.className="message-area error");if(L.classList.contains("locked")||this.classList.contains("locked"))return;const s=L,a=this,i=s.dataset.color;s.dataset.color=a.dataset.color,a.dataset.color=i;const r=(e,t)=>{const o=K(t,15),n=U(t,15);e.style.background=`linear-gradient(135deg, ${o}, ${t} 50%, ${n})`};return r(s,s.dataset.color),r(a,a.dataset.color),ue(n)&&ue(o)?(s.classList.add("correct-position"),a.classList.add("correct-position"),z(),setTimeout((()=>{s.classList.remove("correct-position"),a.classList.remove("correct-position"),""===l.textContent&&G()}),500)):(C++,ee(),s.classList.add("wrong-position"),a.classList.add("wrong-position"),l.textContent=e.messages.wrongPosition,l.className="message-area error",setTimeout((()=>{s.classList.remove("wrong-position"),a.classList.remove("wrong-position")}),500)),Z(),X(),void se()}const c=a.includes(i),d=(a.indexOf(i),this.dataset.paletteType,[]);for(let e=0;e<5;e++){const t=5*n+e,o=y.querySelector(`.tile[data-index="${t}"]:not(.empty-slot)`);o&&!o.classList.contains("empty-slot")&&d.push({color:o.dataset.color,index:t})}if(r){const t=parseInt(L.dataset.index);if(Math.floor(t/5)!==n){C++,ee();const t=W(i,o,"solution");return t.classList.add("shake"),this.parentNode.replaceChild(t,this),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",J),e.addEventListener("drop",Q),t.parentNode.replaceChild(e,t),L&&(L.style.opacity="1")}),500),l.textContent=e.messages.sameRowOnly,void(l.className="message-area error")}const s=document.createElement("div");s.className="tile empty-slot",s.dataset.index=L.dataset.index,s.addEventListener("dragover",J),s.addEventListener("drop",Q),L.parentNode.replaceChild(s,L);const a=W(i,o,"solution");this.parentNode.replaceChild(a,this),ue(n)?(a.classList.add("correct-position"),z(),setTimeout((()=>{a.parentNode&&a.classList.remove("correct-position"),""===l.textContent&&G()}),500)):(C++,ee(),a.classList.add("wrong-position"),l.textContent=e.messages.wrongPosition,l.className="message-area error",setTimeout((()=>{a.parentNode&&a.classList.remove("wrong-position")}),500))}else{if(!c){C++,ee();const t=W(i,o,"solution");return t.classList.add("shake"),this.parentNode.replaceChild(t,this),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",J),e.addEventListener("drop",Q),t.parentNode.replaceChild(e,t),L&&(L.style.opacity="1")}),500),l.textContent=e.messages.wrongRow,void(l.className="message-area error")}const t=W(i,o,"solution");if(this.parentNode.replaceChild(t,this),L.parentNode.removeChild(L),!ue(n))return C++,ee(),t.classList.add("shake"),setTimeout((()=>{const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",J),e.addEventListener("drop",Q),t.parentNode&&t.parentNode.replaceChild(e,t);const n=W(i,h.children.length,"scrambled");h.appendChild(n)}),500),l.textContent=e.messages.wrongPosition,void(l.className="message-area error");t.classList.add("correct-position"),z(),setTimeout((()=>{t.parentNode&&t.classList.remove("correct-position"),""===l.textContent&&G()}),500)}Z(),X(),se()}function Z(){T=[];y.querySelectorAll(".tile:not(.empty-slot)").forEach((e=>{e.classList.contains("empty-slot")||T.push(e)}))}function _(){for(let e=0;e<f.lockedTiles.length;e++)for(let t=0;t<f.lockedTiles[e].length;t++){const o=5*e+t,n=y.querySelector(`.tile[data-index="${o}"]`);if((!f.lockedTiles[e][t]||!n)&&n){const e=document.createElement("div");e.className="tile empty-slot",e.dataset.index=o,e.addEventListener("dragover",J),e.addEventListener("drop",Q),n.parentNode.replaceChild(e,n)}}}function ee(){document.getElementById("blunder-value").textContent=C}function te(){document.getElementById("hints-value").textContent=E}function oe(){if(!k)return;const e=new Date,t=Math.floor((e-k)/1e3),o=Math.floor(t/60).toString().padStart(2,"0"),n=(t%60).toString().padStart(2,"0");document.getElementById("timer-value").textContent=`${o}:${n}`}function ne(){b&&clearInterval(b);const t=new Date,o=Math.floor((t-k)/1e3),n=Math.floor(o/60),s=o%60,i=function(e,t,o){const n=Math.max(0,500-Math.floor(e/10)),s=25*t,a=50*o;return{total:Math.max(0,1e3+n-s-a),baseScore:1e3,timeBonus:n,blunderPenalty:s,hintPenalty:a,timeInSeconds:e,blunders:t,hintsUsed:o}}(o,C,E);B=i.total;const r=e.messages.congratulations.replace("{minutes}",n).replace("{seconds}",s).replace("{blunders}",C).replace("{hintsUsed}",E);l.textContent=r,l.className="message-area success",T.forEach((e=>{e.classList.add("correct"),setTimeout((()=>{e.classList.remove("correct")}),1e3)})),setTimeout((()=>{h.innerHTML="";const e=document.createElement("div");e.className="matrix-score-display",e.textContent=`Your Score: ${i.total}`,h.appendChild(e),g.style.display="none",v.style.display="none",w.style.display="none";let t=document.getElementById("play-again-bottom");t||(t=document.createElement("button"),t.id="play-again-bottom",t.className="play-again",t.textContent="Play Again",t.addEventListener("click",(()=>{t.style.display="none",$()})),a.appendChild(t)),t.style.display=""}),1500)}function se(){N||function(){if(y.querySelectorAll(".empty-slot").length>0)return!1;let e=!0;for(let t=0;t<f.paletteTypes.length;t++){const o=f.paletteTypes[t],n=f.palettes[o];for(let o=0;o<5;o++){const s=5*t+o,a=(f.lockedTiles[t][o],n[o]),i=y.querySelector(`.tile[data-index="${s}"]`);if(!i||i.classList.contains("empty-slot")){e=!1;break}if(i.dataset.color!==a){e=!1;break}}if(!e)break}if(e)return ne(),!0}()}function ae(e){if(e.preventDefault(),this.classList.contains("locked"))return;F=this,F.dataset.sourceMatrix=this.closest("#scrambled-matrix")?"scrambled":"solution";const t=e.touches[0],o=F.getBoundingClientRect();var n,s;Y=t.clientX-o.left,H=t.clientY-o.top,n=t.clientX,s=t.clientY,de(),O=F.cloneNode(!0),O.classList.add("ghost-tile"),O.style.position="fixed",O.style.zIndex="1000",O.style.opacity="0.8",O.style.pointerEvents="none",ce(n,s),requestAnimationFrame((()=>{document.body.appendChild(O)})),F.style.opacity="0.4",R=!0,X()}function ie(e){if(!F)return;e.preventDefault(),R=!0;const t=e.touches[0];ce(t.clientX,t.clientY),window.touchMoveThrottle||(window.touchMoveThrottle=!0,requestAnimationFrame((()=>{let e=[];if(document.elementsFromPoint)e=document.elementsFromPoint(t.clientX,t.clientY);else if(document.elementFromPoint){const o=document.elementFromPoint(t.clientX,t.clientY);o&&(e=[o])}const o=e.find((e=>e.classList&&e.classList.contains("empty-slot")));D&&D!==o&&D.classList.remove("touch-hover"),o&&(o.classList.add("touch-hover"),D=o),window.touchMoveThrottle=!1})))}function le(e){if(F){if(de(),F.style.opacity="1",R){const t=e.changedTouches[0];let o=[];if(document.elementsFromPoint)o=document.elementsFromPoint(t.clientX,t.clientY);else if(document.elementFromPoint){const e=document.elementFromPoint(t.clientX,t.clientY);e&&(o=[e])}const n=o.find((e=>e.classList&&e.classList.contains("empty-slot")));n&&(n.classList.remove("touch-hover"),L=F,Q.call(n,{preventDefault:()=>{}}))}F=null,D=null,R=!1}}function re(){F&&(F.style.opacity="1"),de(),F=null,D=null,R=!1}function ce(e,t){if(!O)return;const o=e-Y,n=t-H;requestAnimationFrame((()=>{O.style.transform=`translate3d(${o}px, ${n}px, 0)`}))}function de(){O&&O.parentNode&&(O.parentNode.removeChild(O),O=null),document.querySelectorAll(".empty-slot.touch-hover").forEach((e=>{e.classList.remove("touch-hover")}))}function ue(e){const t=f.paletteTypes[e],o=f.palettes[t],n={};for(const e of o)n[e]=(n[e]||0)+1;const s={};for(let t=0;t<5;t++){const o=5*e+t,n=y.querySelector(`.tile[data-index="${o}"]:not(.empty-slot)`);if(n){const e=n.dataset.color;s[e]=(s[e]||0)+1}}for(const e in s)if(!(e in n))return!1;for(const e in s)if(s[e]>n[e])return!1;return!0}g.addEventListener("click",(function(){N=!N,N?(!function(){(function(){window.savedState=[];for(let e=0;e<f.lockedTiles.length;e++)for(let t=0;t<f.lockedTiles[e].length;t++){const o=5*e+t,n=y.querySelector(`.tile[data-index="${o}"]`);if(n&&!n.classList.contains("empty-slot")){const s=f.lockedTiles[e][t];window.savedState.push({index:o,color:n.dataset.color,locked:s})}}})(),_();for(let e=0;e<f.lockedTiles.length;e++){const t=f.paletteTypes[e],o=f.palettes[t];for(let t=0;t<f.lockedTiles[e].length;t++){const n=5*e+t;if(f.lockedTiles[e][t])continue;const s=W(o[t],n,"solution");s.classList.add("solution-tile");const a=y.querySelector(`.tile[data-index="${n}"]`);a&&a.parentNode.replaceChild(s,a)}}l.textContent=e.messages.showingSolution,l.className="message-area hint"}(),g.textContent=e.buttons.hideSolution):(_(),window.savedState&&window.savedState.forEach((e=>{const t=e.index,o=Math.floor(t/5),n=t%5,s=f.lockedTiles[o][n];if(s)return;const a=y.querySelector(`.tile[data-index="${t}"]`);if(a&&!s){const o=W(e.color,t,"solution");a.parentNode.replaceChild(o,a)}})),l.textContent=e.messages.continueArranging,l.className="message-area",setTimeout((()=>{G()}),3e3),g.textContent=e.buttons.showSolution)})),v.addEventListener("click",(function(){E++,te(),v.disabled=!0,y.querySelectorAll(".tile").forEach((e=>{e.classList.remove("magic-glow"),e.classList.remove("wrong-position")}));let t=0;for(let e=0;e<f.paletteTypes.length;e++){const o=f.paletteTypes[e],n=f.palettes[o];for(let o=0;o<5;o++){if(f.lockedTiles[e][o])continue;const s=5*e+o,a=y.querySelector(`.tile[data-index="${s}"]:not(.empty-slot)`);if(a&&!a.classList.contains("empty-slot")){const e=a.dataset.color;if(n.includes(e)){n.indexOf(e)!==o&&(a.classList.add("magic-glow"),t++)}}}}t>0?(l.textContent=e.messages.showingHint,l.className="message-area hint"):(l.textContent=e.messages.noMisplacedTiles||"All tiles are correctly placed in their rows! ✨",l.className="message-area success");let o=5;v.textContent=e.buttons.hintWithCountdown.replace("{seconds}",o),S&&clearInterval(S),S=setInterval((()=>{if(o--,v.textContent=e.buttons.hintWithCountdown.replace("{seconds}",o),o<=0){clearInterval(S);y.querySelectorAll(".tile").forEach((e=>{e.classList.remove("magic-glow"),e.classList.remove("wrong-position")})),v.textContent=e.buttons.showHint,v.disabled=!1,l.textContent="",l.className="message-area"}}),1e3)})),w.addEventListener("click",$);const me=document.getElementById("finish-button");me&&me.addEventListener("click",(function(){ne()})),$(),window.showSuccess=ne,window.addEventListener("keydown",(function(e){e.ctrlKey&&e.shiftKey&&"e"===e.key.toLowerCase()&&"none"!==document.querySelector(".game-container").style.display&&ne()}))}))})()})();